def command(name, synopsis, command)
  Class.new(Vagrant.plugin("2")) do
    name name

    command name do
      Class.new(Vagrant.plugin(2, :command)) do
        @synopsis = synopsis

        def self.synopsis
          @synopsis
        end

        define_method :execute do
          exec(command)
        end
      end
    end
  end
end

command("girder-log", "tails Girder log", "vagrant ssh -c 'sudo tail -c +1 -f /var/log/upstart/girder.log'")
command("girder-restart", "restarts Girder", "vagrant ssh -c 'sudo restart girder'")
command("girder-worker-log", "tails Girder Worker log", "vagrant ssh -c 'sudo tail -c +1 -f /var/log/upstart/girder-worker.log'")
command("girder-worker-restart", "restarts Girder Worker", "vagrant ssh -c 'sudo restart girder-worker'")
command("watch", "builds OSUMO plugin in watch mode", "vagrant ssh -c './venv/bin/girder-install web --watch-plugin osumo --plugin-prefix index'")
